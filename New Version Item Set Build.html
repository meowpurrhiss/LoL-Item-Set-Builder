<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Item Set Builder</title>
<style>
:root{
  --bg:#0f1720; --card:#111827; --accent:#16a34a; --muted:#9ca3af; --tile:#0b1220;
}
html,body{
  height:100%;
  margin:0;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  overflow-y:auto;
  padding-bottom: 160px;
}
body{
  background:linear-gradient(180deg,#071023 0%, #071826 100%);
  color:#e6eef8;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:12px;
}
header{
  width:100%;
  max-width:980px;
  margin-bottom:8px
}
h1{font-size:20px;margin:0 0 6px 0;}
p.lead{margin:0;color:var(--muted);font-size:13px}
#gridWrap{
  width:100%;
  max-width:980px;
  background:transparent;
  border-radius:10px;
  padding:8px 6px 110px 6px;
  box-sizing:border-box;
}
#champGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(78px,1fr));
  gap:8px;
  padding:6px;
  align-items:start;
  justify-items:center;
}
.champTile{
  width:78px;
  user-select:none;
  text-align:center;
  border-radius:8px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:6px;
  box-sizing:border-box;
  transition:transform .08s ease, box-shadow .12s ease;
  cursor:pointer;
  border:1px solid rgba(255,255,255,0.03);
}
.champTile:active{transform:scale(.98)}
.champTile.selected{outline:3px solid rgba(22,163,74,0.18); box-shadow:0 8px 20px rgba(2,6,23,0.6); transform:translateY(-6px); border-color:rgba(22,163,74,0.45)}
.champImg{width:60px;height:60px;border-radius:6px;background:#061020;display:block;margin:0 auto 6px auto;object-fit:cover}
.champName{font-size:11px;color:#e6eef8;line-height:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.controls{
  position:fixed;
  left:0;right:0;bottom:0;
  background:linear-gradient(180deg, rgba(2,6,23,0.15), rgba(2,6,23,0.95));
  backdrop-filter: blur(6px);
  padding:12px;
  border-top:1px solid rgba(255,255,255,0.03);
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:center
}
.btn{padding:12px 16px;border-radius:10px;border:0;background:linear-gradient(180deg,var(--accent),#05944b);color:white;font-weight:600;font-size:14px;box-shadow:0 8px 18px rgba(2,6,23,0.45)}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}
.infoBox{
  position: fixed;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%);
  width:95%;
  max-width:980px;
  max-height:50%;
  overflow-y:auto;
  margin-top:12px;
  padding:10px;
  border-radius:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.03);
  display:none;
  z-index:999;
}
.resultLine{font-size:14px;color:#e6eef8;margin:6px 0}
.small{font-size:13px;color:var(--muted)}
.hint{font-size:12px;color:var(--muted);margin-top:6px}
@media (min-width:680px){
  .champTile{width:84px}
  .champImg{width:64px;height:64px}
  #champGrid{gap:10px}
  .controls{padding:14px}
}
</style>
</head>
<body>

<header>
  <h1>Item Set Builder</h1>
  <p class="lead">Tap champion portraits to select the enemy team. Maximum 5 champions. Then tap <strong>Analyze Team</strong> for a composition summary and champion-agnostic item recommendation.</p>
</header>

<div id="gridWrap">
  <div id="champGrid" aria-live="polite"></div>
</div>

<div class="infoBox" id="infoBox">
  <div class="resultLine" id="compSummary"></div>
  <div class="resultLine" id="majorRoles"></div>
  <div class="resultLine" id="buildSuggest" style="font-weight:700"></div>
  <div class="small" id="explain" style="margin-top:6px"></div>
</div>

<div class="controls">
  <button class="btn ghost" id="clearBtn">Clear</button>
  <button class="btn" id="analyzeBtn">Analyze Team</button>
</div>

<script>
const champions = [
"Aatrox","Ahri","Akali","Alistar","Amumu","Anivia","Annie","Aphelios","Ashe","Aurelion Sol",
"Azir","Bard","Bel'Veth","Blitzcrank","Brand","Braum","Caitlyn","Camille","Cassiopeia","Cho'Gath",
"Corki","Darius","Diana","Dr. Mundo","Draven","Ekko","Elise","Evelynn","Ezreal","Fiddlesticks",
"Fiora","Fizz","Galio","Gangplank","Garen","Gnar","Gragas","Graves","Gwen","Hecarim",
"Heimerdinger","Illaoi","Irelia","Ivern","Janna","Jarvan IV","Jax","Jayce","Jhin","Jinx",
"Kai'Sa","Kalista","Karma","Karthus","Kassadin","Katarina","Kayle","Kayn","Kennen","Kha'Zix",
"Kindred","Kled","Kog'Maw","LeBlanc","Lee Sin","Leona","Lillia","Lissandra","Lucian","Lulu",
"Lux","Malphite","Malzahar","Maokai","Master Yi","Miss Fortune","Mordekaiser","Morgana","Nami","Nasus",
"Nautilus","Neeko","Nidalee","Nilah","Nocturne","Nunu & Willump","Olaf","Orianna","Ornn","Pantheon",
"Poppy","Pyke","Qiyana","Quinn","Rakan","Rammus","Rek'Sai","Rell","Renata Glasc","Renekton",
"Rengar","Riven","Rumble","Ryze","Samira","Sejuani","Senna","Seraphine","Sett","Shaco",
"Shen","Shyvana","Singed","Sion","Sivir","Skarner","Sona","Soraka","Swain","Sylas",
"Syndra","Tahm Kench","Taliyah","Talon","Taric","Teemo","Thresh","Tristana","Trundle","Tryndamere",
"Twisted Fate","Twitch","Udyr","Urgot","Varus","Vayne","Veigar","Vel'Koz","Vex","Vi",
"Viego","Viktor","Vladimir","Volibear","Warwick","Wukong","Xayah","Xerath","Xin Zhao","Yasuo",
"Yone","Yorick","Yuumi","Yunara","Zac","Zed","Zeri","Ziggs","Zilean","Zoe","Zyra"
];

const championRoles = {
"Aatrox":["Tank","ADC"], "Ahri":["Burst","Mage"], "Akali":["Burst"], "Alistar":["Tank","Support"],
"Amumu":["Tank","Mage"], "Anivia":["Mage","Poke"], "Annie":["Burst","Mage"], "Aphelios":["ADC"], "Ashe":["Poke","ADC"],
"Aurelion Sol":["Mage","Poke"], "Azir":["Mage","ADC"], "Bard":["Support"], "Bel'Veth":["ADC"], "Blitzcrank":["Tank","Support"],
"Brand":["Mage","Poke"], "Braum":["Tank","Support"], "Caitlyn":["ADC","Poke"], "Camille":["Burst","Tank"], "Cassiopeia":["Mage","Poke"],
"Cho'Gath":["Tank","Mage"], "Corki":["ADC","Mage"], "Darius":["Tank","Burst"], "Diana":["Burst","Mage"], "Dr. Mundo":["Tank"],
"Draven":["ADC"], "Ekko":["Burst","Mage"], "Elise":["Burst","Tank"], "Evelynn":["Burst"], "Ezreal":["ADC","Poke"],
"Fiddlesticks":["Mage","Burst"], "Fiora":["Burst","ADC"], "Fizz":["Burst"], "Galio":["Tank","Mage"], "Gangplank":["Burst","Poke"],
"Garen":["Tank","ADC"], "Gnar":["Tank","Burst"], "Gragas":["Tank","Mage"], "Graves":["ADC","Burst"], "Gwen":["Burst","ADC"],
"Hecarim":["Tank","Burst"], "Heimerdinger":["Mage","Poke"], "Illaoi":["Tank","Burst"], "Irelia":["Burst","ADC"], "Ivern":["Support"],
"Janna":["Support"], "Jarvan IV":["Tank","Burst"], "Jax":["Burst","ADC"], "Jayce":["Burst","Poke"], "Jhin":["ADC","Poke"], "Jinx":["ADC"],
"Kai'Sa":["ADC"], "Kalista":["ADC"], "Karma":["Support","Mage"], "Karthus":["Mage","Poke"], "Kassadin":["Burst","Mage"], "Katarina":["Burst"],
"Kayle":["ADC","Support"], "Kayn":["Burst"], "Kennen":["Mage","Burst","Poke"], "Kha'Zix":["Burst"], "Kindred":["ADC"], "Kled":["Tank","Burst"],
"Kog'Maw":["ADC"], "LeBlanc":["Burst","Mage"], "Lee Sin":["Burst","Tank"], "Leona":["Tank","Support"], "Lillia":["Mage","Tank"],
"Lissandra":["Mage","Poke"], "Lucian":["ADC"], "Lulu":["Support","Mage"], "Lux":["Mage","Poke"], "Malphite":["Tank"], "Malzahar":["Mage","Poke"],
"Maokai":["Tank"], "Master Yi":["ADC","Burst"], "Miss Fortune":["ADC","Poke"], "Mordekaiser":["Poke","ADC"], "Morgana":["Support","Mage"],
"Nami":["Support"], "Nasus":["Tank","ADC"], "Nautilus":["Tank","Support"], "Neeko":["Mage","Burst"], "Nidalee":["Burst","Poke"], "Nilah":["ADC"],
"Nocturne":["Burst"], "Nunu & Willump":["Tank","Support"], "Olaf":["Tank","Burst"], "Orianna":["Mage","Poke"], "Ornn":["Tank","Mage"], "Pantheon":["Burst"],
"Poppy":["Tank","Burst"], "Pyke":["Burst","Support"], "Qiyana":["Burst"], "Quinn":["ADC","Burst"], "Rakan":["Support","Tank"], "Rammus":["Tank"],
"Rek'Sai":["Tank","Burst"], "Rell":["Tank","Support"], "Renata Glasc":["Support"], "Renekton":["Tank","Burst"], "Rengar":["Burst"],
"Riven":["Burst","ADC"], "Rumble":["Mage","Tank","Poke"], "Ryze":["Mage","Poke"], "Samira":["ADC","Burst"], "Sejuani":["Tank"],
"Senna":["ADC","Support"], "Seraphine":["Mage","Support","Poke"], "Sett":["Tank","ADC"], "Shaco":["Burst"], "Shen":["Tank","Support"],
"Shyvana":["Tank","Burst"], "Singed":["Tank","Poke"], "Sion":["Tank"], "Sivir":["ADC","Poke"], "Skarner":["Tank"], "Sona":["Support","Poke"],
"Soraka":["Support"], "Swain":["Mage","Poke"], "Sylas":["Burst","Mage"], "Syndra":["Mage","Burst"], "Tahm Kench":["Tank","Support"], "Taliyah":["Mage","Poke"],
"Talon":["Burst"], "Taric":["Support","Tank"], "Teemo":["Poke","Burst"], "Thresh":["Support","Tank"], "Tristana":["ADC"], "Trundle":["Tank","ADC"],
"Tryndamere":["ADC","Burst"], "Twisted Fate":["Mage","Poke"], "Twitch":["ADC","Poke"], "Udyr":["Tank","Burst"], "Urgot":["ADC","Tank"], "Varus":["ADC","Poke"],
"Vayne":["ADC"], "Veigar":["Mage","Burst"], "Vel'Koz":["Mage","Poke"], "Vex":["Mage","Burst"], "Vi":["Burst","Tank"], "Viego":["Burst","ADC"],
"Viktor":["Mage","Poke"], "Vladimir":["Mage","Burst"], "Volibear":["Tank","Burst"], "Warwick":["Tank","ADC"], "Wukong":["Burst","Tank"], "Xayah":["ADC"],
"Xerath":["Mage","Poke"], "Xin Zhao":["Tank","Burst"], "Yasuo":["ADC","Burst"], "Yone":["ADC","Burst"], "Yorick":["ADC","Tank"], "Yuumi":["Support"],
"Yunara":["Burst","Mage"], "Zac":["Tank","Support"], "Zed":["Burst"], "Zeri":["ADC"], "Ziggs":["Mage","Poke"], "Zilean":["Support","Poke"], "Zoe":["Mage","Burst"], "Zyra":["Mage","Poke"]
};

// Tile creation and image handling
const grid = document.getElementById("champGrid");
const selected = new Set();

function toDataDragonKey(name){
  const special = {"Kha'Zix":"KhaZix","Cho'Gath":"ChoGath","Kai'Sa":"Kaisa","LeBlanc":"Leblanc",
  "Nunu & Willump":"Nunu","Wukong":"MonkeyKing","FiddleSticks":"Fiddlesticks","Dr. Mundo":"DrMundo",
  "Rek'Sai":"RekSai","Vel'Koz":"Velkoz","Jarvan IV":"JarvanIV","Renata Glasc":"Renata",
  "Miss Fortune":"MissFortune","Master Yi":"MasterYi","Tahm Kench":"TahmKench","Xin Zhao":"XinZhao",
  "Aurelion Sol":"AurelionSol","Bel'Veth":"Belveth"};
  if(special[name]) return special[name];
  return name.split(/[\s'&.]+/).map(w=>w.charAt(0).toUpperCase()+w.slice(1).replace(/[^a-zA-Z0-9]/g,"")).join('');
}

function makeTile(name){
  const tile = document.createElement("div");
  tile.className="champTile";
  tile.setAttribute("data-name",name);

  const img = document.createElement("img");
  img.className="champImg"; img.alt=name;
  const key = toDataDragonKey(name);
  img.src=`https://ddragon.leagueoflegends.com/cdn/13.23.1/img/champion/${key}.png`;
  img.onerror=function(){
    this.onerror=null;
    const initials = name.split(/\s+/).map(p=>p[0]).join('').slice(0,2).toUpperCase();
    this.src=`data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' rx='8' fill='#0b1220'/><text x='50%' y='55%' font-size='46' text-anchor='middle' fill='#dbeafe' font-family='Arial' dy='.35em'>${initials}</text></svg>`)}`;
  };

  const label = document.createElement("div"); label.className="champName"; label.textContent=name;
  tile.appendChild(img); tile.appendChild(label);

  tile.addEventListener("click",()=>{
    const nm = tile.getAttribute("data-name");
    if(selected.has(nm)){ selected.delete(nm); tile.classList.remove("selected"); }
    else{
      if(selected.size >= 5){ tile.style.transform="scale(0.98)"; setTimeout(()=>tile.style.transform="",120); return; }
      selected.add(nm); tile.classList.add("selected");
    }
    updateCounter();
  });

  return tile;
}

for(const c of champions) grid.appendChild(makeTile(c));

const clearBtn = document.getElementById("clearBtn");
const analyzeBtn = document.getElementById("analyzeBtn");
const infoBox = document.getElementById("infoBox");
const compSummary = document.getElementById("compSummary");
const majorRoles = document.getElementById("majorRoles");
const buildSuggest = document.getElementById("buildSuggest");
const explain = document.getElementById("explain");

clearBtn.addEventListener("click", ()=>{
  selected.clear();
  document.querySelectorAll(".champTile.selected").forEach(t=>t.classList.remove("selected"));
  updateCounter();
  infoBox.style.display="none";
});

function updateCounter(){ analyzeBtn.textContent=`Analyze Team (${selected.size})`; }

analyzeBtn.addEventListener("click", ()=>{
  if(selected.size===0) return;
  const roleCount={Tank:0,Burst:0,Mage:0,Poke:0,ADC:0,Support:0};
  const roleChampions={Tank:[],Burst:[],Mage:[],Poke:[],ADC:[],Support:[]};
  selected.forEach(ch=>{
    const roles = championRoles[ch];
    roles.forEach(r=>{
      roleCount[r]++; roleChampions[r].push(ch);
    });
  });
  const comp = Object.entries(roleCount).filter(([r,v])=>v>0).map(([r,v])=>`${r}: ${v}`).join(' | ');
  const major = Object.entries(roleChampions).filter(([r,v])=>v.length>0).map(([r,v])=>`${r}: ${v.join(', ')}`).join(' | ');

  const maxRole = Object.entries(roleCount).sort((a,b)=>b[1]-a[1])[0][0];
  const itemAdjective = maxRole==="Tank"?"Balanced/Tanky":(maxRole==="Burst"?"Burst/AP":(maxRole==="ADC"?"AD Carry/Auto-Attack":"Mage/Poke"));
  
  compSummary.textContent = `Selected Champions (${selected.size}): ${Array.from(selected).join(', ')}`;
  majorRoles.textContent = `Roles Breakdown: ${major}`;
  buildSuggest.textContent = `Suggested General Item Focus: ${itemAdjective}`;
  explain.textContent = `This analysis counts the number of champions per role. Max role: ${maxRole}. Item focus suggestion is a simple guide.`;

  infoBox.style.display="block";
  infoBox.scrollIntoView({behavior:"smooth",block:"end"});
});
</script>

</body>
</html>
